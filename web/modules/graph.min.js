function Read_new_scales(){scale_min_strain=strain_chart.scales.x.min,scale_max_strain=strain_chart.scales.x.max,scale_min_dw=dw_chart.scales.x.min,scale_max_dw=dw_chart.scales.x.max,dw_chart_zoomed=1,strain_chart_zoomed=1,1==dw_chart.getZoomLevel()&&(dw_chart_zoomed=0),1==strain_chart.getZoomLevel()&&(strain_chart_zoomed=0)}function reset_color_points(t,a){t.data.datasets[1].pointBackgroundColor=[],t.data.datasets[1].pointBorderColor=[];for(var e=0;e<=t.data.datasets[1].data.length-1;e++)t.data.datasets[1].pointBackgroundColor[e]=a,t.data.datasets[1].pointBorderColor[e]=a}function reset_selected_points(t,a){t.data.datasets[1].pointBackgroundColor=[],t.data.datasets[1].pointBorderColor=[];for(var e=0;e<=t.data.datasets[1].data.length-1;e++)t.data.datasets[1].pointBackgroundColor[e]=a,t.data.datasets[1].pointBorderColor[e]=a;SelectedPoints=[],isSelectedPoints=!1,t.update()}function test_selected_points(t){isSelectedPoints=!1,SelectedPoints=[];for(var a=0;a<=t.data.datasets[1].data.length-1;a++)t.data.datasets[1].pointBackgroundColor[a]==graph_colors.PointselectedColor&&(SelectedPoints.push(a),isSelectedPoints=!0);SelectedPoints=Array.from(new Set(SelectedPoints)),isSelectedPoints||(SelectedPoints=[])}function reset_zoom(t){1==t&&(isROI=!1,reset_selected_points(strain_chart,graph_colors.c_strain),reset_selected_points(dw_chart,graph_colors.c_dw),selectionContextStrain.clearRect(0,0,canvas_strain.width,canvas_strain.height),selectionContextDw.clearRect(0,0,canvas_dw.width,canvas_dw.height)),xrd_gaph.isZoomedOrPanned()&&xrd_gaph.resetZoom(),strain_chart.isZoomedOrPanned()&&strain_chart.resetZoom(),dw_chart.isZoomedOrPanned()&&dw_chart.resetZoom()}var graph_colors={c_strain:"#ffbf80",c_dw:"#00e6ac",c_data:"#3e95cd",c_fit:"#9999ff",c_fit_live:"#ff0000","graph_colors['PointselectedColor']":"#ff0000"},yAxesDW="",config_strain={type:"line",data:{datasets:[{type:"scatter",xAxisID:"x",data:[],label:"Strain_line",borderColor:graph_colors.c_strain,showLine:!0,dragData:!1},{type:"scatter",xAxisID:"x",data:[],label:"Strain_scatter",borderColor:graph_colors.c_strain,backgroundColor:graph_colors.c_strain,parsing:!1,fill:!1,pointRadius:16,pointHoverRadius:16,pointBackgroundColor:[],pointBorderColor:[]}]},options:{onClick(t){if(t.native.ctrlKey){const o=strain_chart.getElementsAtEventForMode(t,"nearest",{intersect:!0},!1);if(o.length>0&&1==o[0].datasetIndex){var a=o[0].index,e=strain_chart.data.datasets[1].pointBackgroundColor[a];e!=graph_colors.PointselectedColor?strain_chart.data.datasets[1].pointBackgroundColor[a]=graph_colors.PointselectedColor:strain_chart.data.datasets[1].pointBackgroundColor[a]=graph_colors.c_strain,strain_chart.update(),test_selected_points(strain_chart)}}},responsive:!0,parsing:!1,animation:{duration:0},elements:{line:{tension:.4}},scales:{x:[{display:!0,type:"linear",ticks:{display:"auto"},reverse:!0,grid:{display:!0}}],y:{id:"yAxis1",display:!0,title:{display:!0,text:"Strain (%)"},ticks:{callback:function(t,a,e){return a%2==0?t.toFixed(2):""}}}},plugins:{zoom:{zoom:{drag:{enabled:!0,modifierKey:"ctrl",borderColor:"rgb(0, 230, 172)"},mode:"xy"}},tooltip:{enabled:!1},legend:{display:!1},dragData:{showTooltip:!1,dragX:!1,onDragStart:function(t,a,e){startingValueDrag=strain_chart.data.datasets[a].data[e].y},onDrag:function(t,a,e,o){value2add=o.y-startingValueDrag,startingValueDrag=strain_chart.data.datasets[a].data[e].y,isSelectedPoints?Object.entries(strain_chart.data.datasets[a].data).forEach(([t,e])=>{SelectedPoints.includes(parseInt(t))&&(previous_value=strain_chart.data.datasets[a].data[t].y,strain_chart.data.datasets[a].data[t].y=previous_value+value2add)}):strain_chart.data.datasets[a].data[e]=o,strain_chart.update()},onDragEnd:function(t,a,e,o){update_contraints_graph("Strain",a,e,o),reset_zoom(1)}},scales:{y:{dragData:!0}}}}},config_dw={type:"line",data:{datasets:[{type:"scatter",xAxisID:"x",data:[],label:"Dw_line",borderColor:"#ffbf80",showLine:!0,dragData:!1},{type:"scatter",xAxisID:"x",data:[],label:"Dw_scatter",borderColor:graph_colors.c_dw,backgroundColor:graph_colors.c_dw,fill:!1,pointRadius:16,pointHoverRadius:16}]},options:{onClick(t){if(t.native.ctrlKey){const o=dw_chart.getElementsAtEventForMode(t,"nearest",{intersect:!0},!1);if(o.length>0&&1==o[0].datasetIndex){var a=o[0].index,e=dw_chart.data.datasets[1].pointBackgroundColor[a];e!=graph_colors.PointselectedColor?dw_chart.data.datasets[1].pointBackgroundColor[a]=graph_colors.PointselectedColor:dw_chart.data.datasets[1].pointBackgroundColor[a]=graph_colors.c_dw,dw_chart.update(),test_selected_points(dw_chart)}}},responsive:!0,parsing:!1,animation:{duration:0},elements:{line:{tension:.4}},scales:{x:{id:"x",display:!0,title:{display:!0,text:"Depth (√Ö)"},ticks:{major:{fontStyle:"bold",fontColor:"#FF0000"}}},y:{display:!0,min:0,max:10,title:{display:!0,text:"Debye-Waller factor"},ticks:{callback:function(t,a,e){return t.toFixed(2)}}}},plugins:{zoom:{zoom:{drag:{enabled:!0,modifierKey:"ctrl",borderColor:"rgb(0, 230, 172)"},mode:"xy"}},tooltip:{enabled:!1},legend:{display:!1},dragData:{showTooltip:!1,dragX:!1,onDragStart:function(t,a,e){startingValueDrag=dw_chart.data.datasets[a].data[e].y},onDrag:function(t,a,e,o){value2add=o.y-startingValueDrag,startingValueDrag=dw_chart.data.datasets[a].data[e].y,isSelectedPoints?Object.entries(dw_chart.data.datasets[a].data).forEach(([t,e])=>{SelectedPoints.includes(parseInt(t))&&(previous_value=dw_chart.data.datasets[a].data[t].y,dw_chart.data.datasets[a].data[t].y=previous_value+value2add)}):dw_chart.data.datasets[a].data[e]=o,dw_chart.update()},onDragEnd:function(t,a,e,o){update_contraints_graph("DW",a,e,o),reset_zoom(1)}},scales:{y:{dragData:!0}}}}},config_xrd_gaph={data:{datasets:[{type:"scatter",label:"xrd_graph",data:[],borderColor:"#3e95cd",showLine:!0,xAxisID:"x"},{type:"scatter",label:"xrd_fit",data:[],borderColor:"#9999ff",showLine:!0,xAxisID:"x"}]},options:{responsive:!0,animation:{duration:0},elements:{line:{tension:.4}},scales:{x:{display:!0,id:"x",title:{display:!0,text:"2ùöπ(deg.)"},ticks:{major:{fontStyle:"bold",fontColor:"#FF0000"},callback:function(t){return t.toFixed(2)}}},y:{display:!0,type:"logarithmic",title:{display:!0,text:"Intensity (a.u.)"},ticks:{callback:function(t,a,e){return t}}}},plugins:{legend:{display:!1},tooltip:{enabled:!1},zoom:{zoom:{drag:{enabled:!0,modifierKey:"ctrl",borderColor:"rgb(0, 230, 172)"},mode:"xy"}},annotation:{annotations:{}}}}};